@{
    ViewBag.Title = "Email Verification";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewBag.Title</title>
    <link rel="stylesheet" href="/css/EmailVerification.css" />
</head>
<body>
    <div class="container" id="emailSection">
        <br /><br /><br />
        <center>
            <div style="padding-top: 20px">
                <a>
                    <img style="height: 200px" src="/images/PrimeMarket_Logo.png" alt="PrimeMarket Logo" />
                </a>
                <h2>Enter Your Email For Verification</h2>
                <form id="emailForm">
                    <label for="username">E-mail</label>
                    <input class="search-box-input"
                           type="email"
                           id="username"
                           name="username"
                           required
                           placeholder="Enter your e-mail" 
                           style="padding: 8px 16px;
                           border: 1px solid #ddd;
                           border-radius: 20px;
                           width: 250px;
                           outline: none;
                           transition: border-color 0.3s ease; "/>
                    <br /><br />
                    <div>
                        <button class="send-btn" type="submit">Send Verification</button>
                    </div>
                </form>
            </div>
        </center>
    </div>

    <div class="container" id="codeSection" style="display: none;">
        <br /><br /><br />
        <center>
            <div style="padding-top: 20px">
                <h2>Enter the 6-digit Verification Code</h2>
                <form id="codeForm">
                    <label for="verificationCode">Verification Code</label>
                    <input class="search-box-input"
                           type="text"
                           id="verificationCode"
                           name="verificationCode"
                           maxlength="6"
                           required
                           placeholder="Enter code"
                           style="padding: 8px 16px;
                           border: 1px solid #ddd;
                           border-radius: 20px;
                           width: 250px;
                           outline: none;
                           transition: border-color 0.3s ease; " />
                    <br /><br />
                    <div>
                            <button class="send-btn" type="submit">Verify</button>
                    </div>
                </form>
            </div>
        </center>
    </div>

    <script>
        document.getElementById("emailForm").addEventListener("submit", function (e) {
            e.preventDefault();

            const email = document.getElementById("username").value;

            if (email) {
                // Optionally trigger AJAX email verification here
                document.getElementById("emailSection").style.display = "none";
                document.getElementById("codeSection").style.display = "block";
            }
        });

        document.getElementById("codeForm").addEventListener("submit", function (e) {
            e.preventDefault();
            const code = document.getElementById("verificationCode").value;

            if (code.length === 6) {
                        window.location.href = '@Url.Action("Login", "User")';
            } else {
                alert("Please enter a 6-digit code.");
            }
        });
    </script>
</body>
</html>
